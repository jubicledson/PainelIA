-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Tempo de geração: 08/12/2024 às 06:37
-- Versão do servidor: 10.4.32-MariaDB
-- Versão do PHP: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Banco de dados: `dbpaineis`
--
CREATE DATABASE IF NOT EXISTS `dbpaineis` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
USE `dbpaineis`;

-- --------------------------------------------------------

--
-- Estrutura para tabela `estados`
--

DROP TABLE IF EXISTS `estados`;
CREATE TABLE `estados` (
  `id` int(11) NOT NULL,
  `nome` varchar(100) NOT NULL,
  `sigla` char(2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Despejando dados para a tabela `estados`
--

INSERT INTO `estados` (`id`, `nome`, `sigla`) VALUES
(1, 'São Paulo', 'SP');

-- --------------------------------------------------------

--
-- Estrutura para tabela `municipios`
--

DROP TABLE IF EXISTS `municipios`;
CREATE TABLE `municipios` (
  `id` int(11) NOT NULL,
  `nome` varchar(100) NOT NULL,
  `estado_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Despejando dados para a tabela `municipios`
--

INSERT INTO `municipios` (`id`, `nome`, `estado_id`) VALUES
(1, 'Barretos', 1),
(2, 'Colina', 1);

-- --------------------------------------------------------

--
-- Estrutura para tabela `paineis`
--

DROP TABLE IF EXISTS `paineis`;
CREATE TABLE `paineis` (
  `id` int(11) NOT NULL,
  `descricao` varchar(255) NOT NULL,
  `localizacao` varchar(255) NOT NULL,
  `municipio_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Despejando dados para a tabela `paineis`
--

INSERT INTO `paineis` (`id`, `descricao`, `localizacao`, `municipio_id`) VALUES
(1, 'Painel nº 7', 'Centro - Av.17 - entre R.18 x R.16', 1),
(2, 'Painel nº 9', 'Jockey Club - R.Bartolomeu dos Santos - entre Av.São Bernardo x Av.Jorge Adamastor', 1),
(3, 'Painel nº 3', 'Bernardo - R.São João - entre Av.15 x Av.17 Adamastor', 2);

-- --------------------------------------------------------

--
-- Estrutura para tabela `registros`
--

DROP TABLE IF EXISTS `registros`;
CREATE TABLE `registros` (
  `id` int(11) NOT NULL,
  `painel_id` int(11) NOT NULL,
  `person_id` varchar(255) NOT NULL,
  `entry_time` datetime NOT NULL,
  `exit_time` datetime DEFAULT NULL,
  `face_detected` tinyint(1) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Despejando dados para a tabela `registros`
--

INSERT INTO `registros` (`id`, `painel_id`, `person_id`, `entry_time`, `exit_time`, `face_detected`) VALUES
(1, 1, '12345', '2024-12-07 20:17:12', NULL, 1),
(2, 2, '12', '2024-12-07 20:18:41', NULL, 1),
(3, 3, '17', '2024-12-07 20:19:02', NULL, 1),
(4, 1, '15', '2024-12-07 20:19:23', NULL, 1),
(5, 3, '345', '2024-12-07 20:19:23', NULL, 1),
(12, 1, '1', '2024-12-07 20:36:47', NULL, 0),
(13, 1, '1', '2024-12-07 20:36:53', '2024-12-07 20:37:01', 0),
(14, 1, '2', '2024-12-07 20:37:04', NULL, 1),
(15, 1, '2', '2024-12-07 20:37:13', '2024-12-07 20:37:15', 0),
(16, 1, '4', '2024-12-07 20:37:18', '2024-12-07 20:37:23', 1),
(17, 1, '6', '2024-12-07 20:37:26', '2024-12-07 20:37:28', 0),
(18, 1, '7', '2024-12-07 20:37:27', NULL, 0),
(19, 1, '7', '2024-12-07 20:37:33', NULL, 0),
(20, 1, '7', '2024-12-07 20:37:43', NULL, 0),
(21, 1, '1', '2024-12-07 20:42:05', '2024-12-07 20:42:10', 0),
(22, 1, '3', '2024-12-07 20:42:10', NULL, 0),
(23, 1, '3', '2024-12-07 20:42:12', NULL, 0),
(24, 1, '3', '2024-12-07 20:42:22', '2024-12-07 20:42:27', 0),
(25, 1, '4', '2024-12-07 20:42:29', NULL, 0),
(26, 1, '4', '2024-12-07 20:42:32', '2024-12-07 20:42:41', 1),
(27, 1, '6', '2024-12-07 20:42:43', '2024-12-07 20:42:48', 1),
(28, 1, '8', '2024-12-07 20:42:49', NULL, 0),
(29, 1, '8', '2024-12-07 20:42:52', NULL, 1),
(30, 1, '8', '2024-12-07 20:43:02', '2024-12-07 20:43:08', 0),
(31, 1, '9', '2024-12-07 20:43:03', '2024-12-07 20:43:05', 0),
(32, 1, '10', '2024-12-07 20:43:05', NULL, 0),
(33, 1, '11', '2024-12-07 20:43:07', '2024-12-07 20:43:09', 0),
(34, 1, '10', '2024-12-07 20:43:12', NULL, 0),
(35, 1, '10', '2024-12-07 20:43:22', NULL, 0),
(36, 1, '10', '2024-12-07 20:43:32', NULL, 0),
(37, 1, '10', '2024-12-07 20:43:42', NULL, 0),
(38, 1, '10', '2024-12-07 20:43:52', NULL, 0),
(39, 1, '10', '2024-12-07 20:44:02', NULL, 1),
(40, 1, '10', '2024-12-07 20:44:12', NULL, 1),
(41, 1, '10', '2024-12-07 20:44:22', NULL, 1),
(42, 1, '10', '2024-12-07 20:44:32', NULL, 1),
(43, 1, '10', '2024-12-07 20:44:42', NULL, 1),
(44, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(45, 1, '3', '2024-12-07 20:49:52', NULL, 0),
(46, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(47, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(48, 1, '6', '2024-12-07 20:50:02', NULL, 0),
(49, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(50, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(51, 1, '6', '2024-12-07 20:50:02', NULL, 1),
(52, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(53, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(54, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(55, 1, '7', '2024-12-07 20:50:17', NULL, 1),
(56, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(57, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(58, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(59, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(60, 1, '9', '2024-12-07 20:50:31', NULL, 0),
(61, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(62, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(63, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(64, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(65, 1, '9', '2024-12-07 20:50:31', NULL, 1),
(66, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(67, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(68, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(69, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(70, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(71, 1, '11', '2024-12-07 20:50:52', NULL, 0),
(72, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(73, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(74, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(75, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(76, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(77, 1, '11', '2024-12-07 20:50:52', NULL, 0),
(78, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(79, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(80, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(81, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(82, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(83, 1, '11', '2024-12-07 20:50:52', NULL, 0),
(84, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(85, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(86, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(87, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(88, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(89, 1, '11', '2024-12-07 20:50:52', NULL, 0),
(90, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(91, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(92, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(93, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(94, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(95, 1, '11', '2024-12-07 20:50:52', NULL, 1),
(96, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(97, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(98, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(99, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(100, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(101, 1, '11', '2024-12-07 20:50:52', NULL, 1),
(102, 1, '12', '2024-12-07 20:51:41', NULL, 0),
(103, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(104, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(105, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(106, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(107, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(108, 1, '11', '2024-12-07 20:50:52', NULL, 1),
(109, 1, '12', '2024-12-07 20:51:41', '2024-12-07 20:51:46', 0),
(110, 1, '1', '2024-12-07 20:49:48', '2024-12-07 20:49:53', 0),
(111, 1, '3', '2024-12-07 20:49:52', '2024-12-07 20:49:59', 0),
(112, 1, '6', '2024-12-07 20:50:02', '2024-12-07 20:50:16', 1),
(113, 1, '7', '2024-12-07 20:50:17', '2024-12-07 20:50:26', 1),
(114, 1, '9', '2024-12-07 20:50:31', '2024-12-07 20:50:54', 1),
(115, 1, '11', '2024-12-07 20:50:52', NULL, 1),
(116, 1, '12', '2024-12-07 20:51:41', '2024-12-07 20:51:46', 0),
(117, 1, '1', '2024-12-07 20:53:56', NULL, 0),
(118, 1, '1', '2024-12-07 20:54:02', NULL, 0),
(119, 1, '1', '2024-12-07 20:54:12', NULL, 0),
(120, 1, '1', '2024-12-07 20:54:22', NULL, 0),
(121, 1, '1', '2024-12-07 20:54:32', NULL, 1),
(122, 1, '1', '2024-12-07 20:54:42', NULL, 1),
(123, 1, '1', '2024-12-07 20:54:52', NULL, 1),
(124, 1, '1', '2024-12-07 20:55:02', NULL, 1),
(125, 1, '1', '2024-12-07 20:55:12', NULL, 1),
(126, 1, '1', '2024-12-07 20:55:22', NULL, 1),
(127, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(128, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(129, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(130, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(131, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(132, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(133, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(134, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(135, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(136, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(137, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(138, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(139, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(140, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(141, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(142, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(143, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(144, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(145, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(146, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(147, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(148, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(149, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(150, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(151, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(152, 1, '1', '2024-12-07 20:59:15', '2024-12-07 20:59:15', 0),
(153, 1, '3', '2024-12-07 21:01:06', '2024-12-07 21:01:10', 0),
(154, 1, '1', '2024-12-07 21:03:50', '2024-12-07 21:03:53', 0),
(155, 1, '1', '2024-12-07 21:03:50', '2024-12-07 21:03:53', 0),
(156, 1, '1', '2024-12-07 21:03:50', '2024-12-07 21:03:53', 0),
(157, 1, '1', '2024-12-07 00:04:41', '2024-12-07 03:04:44', 0),
(158, 1, '1', '2024-12-07 01:04:41', '2024-12-07 04:04:44', 0),
(159, 1, '1', '2024-12-07 02:04:41', '2024-12-07 05:04:44', 0),
(160, 1, '6', '2024-12-07 03:04:41', '2024-12-07 06:04:44', 1),
(161, 1, '1', '2024-12-07 04:04:41', '2024-12-07 07:04:44', 0),
(162, 1, '6', '2024-12-07 05:04:41', '2024-12-07 08:04:44', 1),
(163, 1, '7', '2024-12-07 06:04:41', '2024-12-07 09:04:44', 0),
(164, 1, '1', '2024-12-07 07:04:41', '2024-12-07 10:04:44', 0),
(165, 1, '6', '2024-12-07 08:04:41', '2024-12-07 11:04:44', 1),
(166, 1, '7', '2024-12-07 09:04:41', '2024-12-07 12:04:44', 0),
(167, 1, '1', '2024-12-07 10:04:41', '2024-12-07 13:04:44', 0),
(168, 1, '6', '2024-12-07 11:04:41', '2024-12-07 14:04:44', 1),
(169, 1, '7', '2024-12-07 12:04:41', '2024-12-07 15:04:44', 0),
(170, 1, '1', '2024-12-07 13:04:41', '2024-12-07 16:04:44', 0),
(171, 1, '6', '2024-12-07 14:04:41', '2024-12-07 17:04:44', 1),
(172, 1, '7', '2024-12-07 15:04:41', '2024-12-07 18:04:44', 0),
(173, 1, '1', '2024-12-07 16:04:41', '2024-12-07 22:04:44', 0),
(174, 1, '6', '2024-12-07 17:04:41', '2024-12-07 17:04:44', 1),
(175, 1, '7', '2024-12-07 18:04:41', '2024-12-07 18:04:44', 0),
(176, 1, '1', '2024-12-07 19:04:41', '2024-12-07 19:04:44', 0),
(177, 1, '6', '2024-12-07 22:04:41', '2024-12-07 22:04:44', 1),
(178, 1, '7', '2024-12-07 23:04:51', '2024-12-07 23:04:59', 0),
(182, 1, '7', '2024-12-08 23:04:51', '2024-12-08 23:04:59', 0),
(183, 1, '12345', '2024-12-08 03:17:12', NULL, 1),
(184, 1, '12345', '2024-12-08 05:17:12', NULL, 1),
(185, 1, '12345', '2024-12-08 03:17:12', NULL, 1);

--
-- Índices para tabelas despejadas
--

--
-- Índices de tabela `estados`
--
ALTER TABLE `estados`
  ADD PRIMARY KEY (`id`);

--
-- Índices de tabela `municipios`
--
ALTER TABLE `municipios`
  ADD PRIMARY KEY (`id`),
  ADD KEY `estado_id` (`estado_id`);

--
-- Índices de tabela `paineis`
--
ALTER TABLE `paineis`
  ADD PRIMARY KEY (`id`),
  ADD KEY `municipio_id` (`municipio_id`);

--
-- Índices de tabela `registros`
--
ALTER TABLE `registros`
  ADD PRIMARY KEY (`id`),
  ADD KEY `painel_id` (`painel_id`);

--
-- AUTO_INCREMENT para tabelas despejadas
--

--
-- AUTO_INCREMENT de tabela `estados`
--
ALTER TABLE `estados`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT de tabela `municipios`
--
ALTER TABLE `municipios`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT de tabela `paineis`
--
ALTER TABLE `paineis`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT de tabela `registros`
--
ALTER TABLE `registros`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=186;

--
-- Restrições para tabelas despejadas
--

--
-- Restrições para tabelas `municipios`
--
ALTER TABLE `municipios`
  ADD CONSTRAINT `municipios_ibfk_1` FOREIGN KEY (`estado_id`) REFERENCES `estados` (`id`) ON DELETE CASCADE;

--
-- Restrições para tabelas `paineis`
--
ALTER TABLE `paineis`
  ADD CONSTRAINT `paineis_ibfk_1` FOREIGN KEY (`municipio_id`) REFERENCES `municipios` (`id`) ON DELETE CASCADE;

--
-- Restrições para tabelas `registros`
--
ALTER TABLE `registros`
  ADD CONSTRAINT `registros_ibfk_1` FOREIGN KEY (`painel_id`) REFERENCES `paineis` (`id`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
